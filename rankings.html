<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Rankings de Libros ‚Äì Librarium.es</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/estilos.css">
  <meta name="description" content="Descubre los mejores libros por g√©nero. Rankings autom√°ticos con valoraciones y fichas detalladas.">

  <style>
    /* ‚úÖ Estilos de pesta√±as */
    .tabs {
      display: flex;
      gap: 12px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .tab-btn {
      padding: 10px 18px;
      background: #0A3D62;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      border: 1px solid #082f4a;
      transition: 0.2s ease;
      font-weight: 600;
    }

    .tab-btn:hover {
      background: #082f4a;
    }

    .tab-btn.active {
      background: #C9A86A;
      color: #111;
      border-color: #b8955c;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* ‚úÖ Paginaci√≥n */
    .pagination {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 12px;
    }

    .pagination button {
      padding: 8px 14px;
      border-radius: 6px;
      border: none;
      background: #0A3D62;
      color: #fff;
      cursor: pointer;
      transition: 0.2s ease;
    }

    .pagination button:hover {
      background: #082f4a;
    }

    .pagination button:disabled {
      background: #999;
      cursor: not-allowed;
    }
  </style>
</head>

<body>

<!-- ‚úÖ HEADER UNIFICADO -->
<header class="header">
  <div class="container header-flex">

    <div class="logo-box">
      <span class="logo-icon">üìö</span>
      <span class="logo-text">Librarium.es</span>
    </div>

   <nav class="menu">
        <a href="index.html" class="active">Inicio</a>
        <a href="blog.html">Blog</a>
        <a href="libros.html">Libros</a>
        <a href="rankings.html">Rankings</a>
        <a href="resenas.html">Rese√±as</a>
        <a href="contacto.html">Contacto</a>
      </nav>

    <!-- ‚úÖ BUSCADOR UNIFICADO -->
    <div class="search-box">
      <form action="buscar.html" method="GET">
        <input type="text" name="q" placeholder="Buscar libros..." required>
        <button type="submit">üîç</button>
      </form>
    </div>

  </div>
</header>

<section class="hero" style="background-image: url('img/hero.png');">
  <div class="container" style="background: rgba(0,0,0,0.55); padding: 50px 30px; border-radius: 12px;">
    <h2 style="color: #fff; font-size: 2.2rem;">Rankings de libros</h2>
    <p style="color: #ddd; font-size: 1.1rem;">Explora los mejores libros por g√©nero.</p>
  </div>
</section>

<main class="container">

  <!-- ‚úÖ PESTA√ëAS -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="fantasia">Fantas√≠a</button>
    <button class="tab-btn" data-tab="terror">Terror</button>
    <button class="tab-btn" data-tab="romance">Romance</button>
    <button class="tab-btn" data-tab="thriller">Thriller</button>
    <button class="tab-btn" data-tab="scifi">Sci‚ÄëFi</button>
    <button class="tab-btn" data-tab="misterio">Misterio</button>
    <button class="tab-btn" data-tab="noficcion">No Ficci√≥n</button>
    <button class="tab-btn" data-tab="juvenil">Juvenil</button>
    <button class="tab-btn" data-tab="historia">Historia</button>
    <button class="tab-btn" data-tab="autoayuda">Autoayuda</button>
  </div>

  <!-- ‚úÖ CONTENIDO DE CADA PESTA√ëA -->
  <section id="fantasia" class="tab-content active">
    <h2>Fantas√≠a</h2>
    <div class="grid"></div>
    <div id="fantasia-paginacion" class="pagination"></div>
  </section>

  <section id="terror" class="tab-content">
    <h2>Terror</h2>
    <div class="grid"></div>
    <div id="terror-paginacion" class="pagination"></div>
  </section>

  <section id="romance" class="tab-content">
    <h2>Romance</h2>
    <div class="grid"></div>
    <div id="romance-paginacion" class="pagination"></div>
  </section>

  <section id="thriller" class="tab-content">
    <h2>Thriller</h2>
    <div class="grid"></div>
    <div id="thriller-paginacion" class="pagination"></div>
  </section>

  <section id="scifi" class="tab-content">
    <h2>Ciencia Ficci√≥n</h2>
    <div class="grid"></div>
    <div id="scifi-paginacion" class="pagination"></div>
  </section>

  <section id="misterio" class="tab-content">
    <h2>Misterio</h2>
    <div class="grid"></div>
    <div id="misterio-paginacion" class="pagination"></div>
  </section>

  <section id="noficcion" class="tab-content">
    <h2>No Ficci√≥n</h2>
    <div class="grid"></div>
    <div id="noficcion-paginacion" class="pagination"></div>
  </section>

  <section id="juvenil" class="tab-content">
    <h2>Juvenil</h2>
    <div class="grid"></div>
    <div id="juvenil-paginacion" class="pagination"></div>
  </section>

  <section id="historia" class="tab-content">
    <h2>Historia</h2>
    <div class="grid"></div>
    <div id="historia-paginacion" class="pagination"></div>
  </section>

  <section id="autoayuda" class="tab-content">
    <h2>Autoayuda</h2>
    <div class="grid"></div>
    <div id="autoayuda-paginacion" class="pagination"></div>
  </section>

</main>

<footer class="footer">
  <div class="container">
    <p>¬© 2025 Librarium.es ‚Äì Todos los derechos reservados</p>
    <div class="footer-links">
      <a href="privacidad.html">Pol√≠tica de privacidad</a>
      <a href="cookies.html">Pol√≠tica de cookies</a>
      <a href="aviso-legal.html">Aviso legal</a>
    </div>
  </div>
</footer>

<script>
  function generarEstrellas(rating) {
    const estrellas = Math.round(rating);
    return "‚≠ê".repeat(estrellas) + ` (${rating}/5)`;
  }

  function ratingAlternativo(titulo) {
    let seed = 0;
    for (let i = 0; i < titulo.length; i++) seed += titulo.charCodeAt(i);
    const random = (seed % 13) / 10;
    return (3.5 + random).toFixed(1);
  }

  async function buscarLibros(query, startIndex = 0, max = 12) {
    const url = `https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(query)}&langRestrict=es&startIndex=${startIndex}&maxResults=${max}`;
    const res = await fetch(url);
    const data = await res.json();
    return data.items || [];
  }

  function obtenerISBN(info) {
    if (!info.industryIdentifiers) return null;
    for (const id of info.industryIdentifiers) {
      if (id.type === "ISBN_13") return id.identifier;
      if (id.type === "ISBN_10") return id.identifier;
    }
    return null;
  }

  function portadaLibro(info) {
    const isbn = obtenerISBN(info);
    if (isbn) return `https://covers.openlibrary.org/b/isbn/${isbn}-L.jpg`;
    if (info.imageLinks?.thumbnail) return info.imageLinks.thumbnail.replace(/^http:\/\//i, "https://");
    return "img/ejemplo.jpg";
  }

  function crearCard(item) {
    const id = item.id;
    const info = item.volumeInfo;
    const titulo = info.title || "T√≠tulo no disponible";
    const autor = info.authors ? info.authors.join(", ") : "Autor desconocido";
    const rating = info.averageRating || ratingAlternativo(titulo);
    const portada = portadaLibro(info);

    return `
      <a href="libro.html?id=${id}" class="card">
        <img src="${portada}" alt="Portada libro">
        <h3>${titulo}</h3>
        <p><strong>${autor}</strong></p>
        <p>${generarEstrellas(rating)}</p>
      </a>
    `;
  }

  /* ‚úÖ PAGINACI√ìN */
  async function cargarPagina(id, query, pagina = 1) {
    const cont = document.querySelector(`#${id} .grid`);
    const paginacion = document.getElementById(id + "-paginacion");

    const startIndex = (pagina - 1) * 12;
    const libros = await buscarLibros(query, startIndex, 12);

    cont.innerHTML = "";
    libros.forEach(item => cont.innerHTML += crearCard(item));

    paginacion.innerHTML = `
      <button onclick="cargarPagina('${id}', '${query}', ${pagina - 1})" ${pagina === 1 ? "disabled" : ""}>‚Üê Anterior</button>
      <span style="margin:0 10px;">P√°gina ${pagina}</span>
      <button onclick="cargarPagina('${id}', '${query}', ${pagina + 1})">Siguiente ‚Üí</button>
    `;
  }

  /* ‚úÖ CARGAR TODAS LAS CATEGOR√çAS */
  cargarPagina("fantasia", "best fantasy books");
  cargarPagina("terror", "best horror books");
  cargarPagina("romance", "best romance novels");
  cargarPagina("thriller", "best thriller books");

  cargarPagina("scifi", "best science fiction books");
  cargarPagina("misterio", "best mystery books");
  cargarPagina("noficcion", "best nonfiction books");
  cargarPagina("juvenil", "best young adult books");
  cargarPagina("historia", "best history books");
  cargarPagina("autoayuda", "best self help books");

  /* ‚úÖ L√≥gica de pesta√±as */
  const tabs = document.querySelectorAll(".tab-btn");
  const contents = document.querySelectorAll(".tab-content");

  tabs.forEach(btn => {
    btn.addEventListener("click", () => {
      tabs.forEach(b => b.classList.remove("active"));
      contents.forEach(c => c.classList.remove("active"));

      btn.classList.add("active");
      document.getElementById(btn.dataset.tab).classList.add("active");
    });
  });
</script>

</body>
</html>
